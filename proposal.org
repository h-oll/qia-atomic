* Proposal of atomic functions

| Function                                                           | Layer        | Description                                                  | Status   |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Sending qubit                                                      | Transport    | Flow control (https://www.brianstorti.com/tcp-flow-control/) | Required |
|                                                                    |              | / error correction / certified error below threshold         |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Sending qubit block                                                | Transport    | Id.                                                          | ?        |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| BB84 Encoding                                                      | Presentation |                                                              | Required |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| BB84 Decoding                                                      | Presentation |                                                              | Required |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| QOPT / confidential channel (encoding and decoding)                | Session      |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Classical authenticated channel                                    |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Creation and braodcast of ghz state                                |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| CReation and broadcast of any stabilizer state                     |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Creation and broadcast of arbitrary graph states                   |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Single qubit Measurement                                           |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Local Pauli gates                                                  |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Local Clifford gates                                               |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Local memory                                                       |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Non Cliffort gates                                                 |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Anonymous transmission channel                                     |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Teleportation protocol                                             |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Verification of stabilizer state                                   |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| (V)QSS                                                             |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Quatum authenticated channel                                       |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| QFactory                                                           |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| equatorial states preparation (local) arbitrary angle or given set |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| swap test                                                          |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Multi qubit POVM                                                   |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| DI-QKD                                                             |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| Privacy amplification                                              |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| secure classical broadcast channel                                 |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| common shared randomness                                           |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| quantum fingerprinting                                             |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| information reconciliation                                         |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| weak coin flipping                                                 |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| quantum 1 way function                                             |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
| CSHS measurements                                                  |              |                                                              |          |
|--------------------------------------------------------------------+--------------+--------------------------------------------------------------+----------|
|                                                                    |              |                                                              |          |


* Transport Layer

** Definition
** Protocols
*** Send single qubit
**** Specs
***** Flow control
Depending on hardware context, buffer's size will be defined for each node. 

Several working modes for the transport layer can be imagined: 
1. simple
   - sender's buffer accepts and returns an error overflow warning if send buffer full
   - receiver's buffer accepts and use a sliding window mechanism to ask the sender to slow down
2. simple + 
   - sender can persist the connection
3. simple + persist + 
   - warn / return qubits that have spent too long time in buffer   
4. simple + persist + 
   - adapt window so that the buffer is space x time

***** Error correction
1. Not taken into account
2. Possibility to ask for a network layer with a given minimum error rate
3. Possibility to achieve a given given fidelity by encoding information using a QECC on top of a network layer that does not achieve it

***** Ability to take a deadline into account (need to be arriving within a given time window)

**** Implementation
- Define a sending / receiving buffer on each end
- keep track of the use of the buffer
- design messenging scheme to ask before transmission and ack after


* Session Layer
** Definition
*** Typical services achieved
- Authentication
- Authorization
- Session restoration

*** Typical protocols
- Apple Talk Data Stream
- Apple Talk Session
- H.245
- Forwarding protocol / Tunneling protocol
- Password authentication protocol
- Point to point tunneling protocol

*** Typical usage
- timing coordination of several data types

*** Possible quantum usage 
- Graph state generation / timing (get a resource right across many nodes => coordination of data among several points)

-

** Protocols
=> Reimplementing transport layers with given characteristics
*** Secure channel
*** Uncloneable channel
*** Authenticated channel

* Presentation layer
** BB84 Prepare
** BB84 Measure

* To be sorted
** Buffer memory
Might be asking to regenerate state if qubit has been in buffer for too long

** Local gates
** Quantum authenticated channel

** Multiparty ghz state generation and distribution

** Multiparty graph state generation and distribution

** Graph state generation

** Single qubit measurement

** Single qubit gate

** Single qubit clifford gate

** Shared entanglement

** GHZ anonymous transmission

** Quantum authentication (encoding / decoding)

** Quantum secret sharing

** Verifiable secret sharing

** Graph state verification

** BB84 encoding / decoding channel

** Secure classical channel

** Single qubit preparation (non clifford state)

** Multi-qubit local POVM

** Swap test 

** Memory

** Privacy amplification

** Information reconciliation

** Weak coin flipping

** QKD

** Common shared randomness

** CZ gates

** QOTP

** Weak string erasure

* Example of classical protocols

** ssh 
*** overview
1. setup phase: checking authentication (identity check) using pub. key crypto
   - client initiates the transaction
   - server sends public key
   - parameter negociation between server / client and opening up of the secure channel
2. strong symmetric encryption and hashing to ensure privacy and integrity

*** Standard https://assets.ctfassets.net/0lvk5dbamxpi/7wNRdbPyeUDql7sZjv3ZTp/ef86cf604b532728ee8da263d27883d8/RFC_4251_-_The_Secure_Shell__SSH__Protocol_Architecture
1. Transport Layer Protocol (server authentication, confidentiality, integrity, compression): will be run over tcp/ip (generally)
   - The transport protocol [SSH-TRANS] provides a confidential channel over an insecure network. It performs server host authentication, key exchange, encryption, and integrity protection. It also derives a unique session id that may be used by higher-level protocols.

2. User Auth. protocol authenticates the client side to the server. Runs over Transport layer
   - The authentication protocol [SSH-USERAUTH] provides a suite of mechanisms that can be used to authenticate the client user to the server.  Individual mechanisms specified in the authentication protocol use the session id provided by the transport protocol and/or depend on the security and integrity guarantees of the transport protocol.
3. Connection protocol: multiplexing the encypted tunnel into several logical channels

*** Remarks
- it is a session layer protocol as it output a session id. Session ID is used to avoid replaying data exchanges from previous sessions. Session ID can be made public.
- but replaces the transport layer with a new one
- rekeying so that the MAC (message authentication code) works fine
- consider mitm attacks
- consider dos attack
- Forward secrecy
  - An encryption system has the property of forward secrecy if plain-text (decrypted) inspection of the data exchange that occurs during key agreement phase of session initiation does not reveal the key that was used to encrypt the remainder of the session.
- ordering of protocols to achieve key excahnge

